generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  USER
  ADMIN
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  EMAIL_VERIFIED
  PHONE_VERIFIED
}

model User {
  // Basic Identification
  id          String  @id @default(uuid()) @db.Uuid
  firstName   String? @db.VarChar(40)
  lastName    String? @db.VarChar(40)
  middleName  String? @db.VarChar(40)
  displayName String? @db.VarChar(100)

  email            String  @unique
  emailVerified    Boolean @default(false)
  phoneCountryCode String
  phoneNumber      String
  phoneVerified    Boolean @default(false)
  password         String?

  // Account Management
  type        Role       @default(USER)
  status      UserStatus @default(ACTIVE)
  avatar      String?
  dateOfBirth DateTime?
  gender      String?    @db.VarChar(20)

  // Marketing & Communication Preferences
  acceptsMarketing     Boolean @default(false)
  newsletterSubscribed Boolean @default(false)
  emailNotifications   Boolean @default(true)
  smsNotifications     Boolean @default(false)

  // Timestamps
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  lastLoginAt       DateTime?
  passwordUpdatedAt DateTime?

  // Indexes
  @@index([phoneCountryCode, phoneNumber], name: "user_phone_country_code_phone_number_idx")
  @@index([email], name: "user_email_idx")
  @@index([status], name: "user_status_idx")
  @@index([createdAt], name: "user_created_at_idx")
}
